<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Eroglu Servis</title>
<style>
  body { font-family: Arial, sans-serif; background:#f5f5f5; margin:0; padding:0; }
  header { background:#0d6efd; color:white; padding:20px; text-align:center; font-size:24px; }
  .menu { display:flex; justify-content:space-between; align-items:center; padding:10px; background:#0d6efd; color:white; }
  .menu button { background:none; border:none; color:white; font-size:24px; cursor:pointer; }
  .sidebar { width:250px; background:#fff; position:fixed; top:0; left:-250px; height:100%; box-shadow:2px 0 5px rgba(0,0,0,0.3); transition:0.3s; padding-top:60px; }
  .sidebar.show { left:0; }
  .sidebar a { display:block; padding:15px; color:#333; text-decoration:none; }
  .sidebar a:hover { background:#f0f0f0; }
  main { margin-left:0; transition:0.3s; padding:20px; }
  main.shift { margin-left:250px; }
  .form-section { background:#fff; padding:20px; border-radius:8px; margin-bottom:20px; }
  label { display:block; margin:10px 0 5px; }
  input, select, button { width:100%; padding:10px; margin-bottom:10px; border-radius:5px; border:1px solid #ccc; }
  button { background:#0d6efd; color:white; border:none; cursor:pointer; }
  #camera-preview { width:100%; height:200px; background:#000; margin-bottom:10px; display:flex; align-items:center; justify-content:center; color:white; font-weight:bold; }
  .hidden { display:none; }
</style>
</head>
<body>

<header>Eroglu</header>
<div class="menu">
  <button id="menuBtn">&#9776;</button>
  <span>Servis Takip</span>
</div>

<div class="sidebar" id="sidebar">
  <a href="#" onclick="showSection('servis')">Yeni Servis</a>
  <a href="#" onclick="showSection('admin')">Admin Paneli</a>
</div>

<main id="main">
  <section id="servis" class="form-section">
    <h2>Yeni Servis Kaydı</h2>

    <label>TV SN Kodu</label>
    <input type="text" id="tvSn" placeholder="Kodu okut veya yaz" />

    <label>TV Marka/Model</label>
    <input type="text" id="tvModel" placeholder="Otomatik veya manuel" />

    <label>Yapılan İşlem</label>
    <select id="yapilanIslem" onchange="checkGaranti()">
      <option value="">Seçiniz</option>
      <option value="led">Led Değişim</option>
      <option value="panel">Panel Değişim</option>
      <option value="diger">Diğer</option>
    </select>

    <label>Garanti Süresi</label>
    <input type="text" id="garanti" placeholder="Elle veya otomatik" readonly />

    <div id="camera-preview">Kamera Kapalı</div>
    <button onclick="startCamera()">Kamerayı Aç</button>

    <label>Renk Paleti</label>
    <input type="color" id="colorPicker" value="#0d6efd" onchange="changeColor()">

    <button onclick="kaydet()">Kaydı Kaydet</button>
  </section>

  <section id="admin" class="form-section hidden">
    <h2>Admin Paneli</h2>
    <label>Admin Şifre</label>
    <input type="password" id="adminPass" placeholder="Şifre gir" />
    <button onclick="loginAdmin()">Giriş</button>
    <div id="adminContent" class="hidden">
      <p>Renk paleti ve diğer ayarlar burada değiştirilebilir.</p>
      <input type="color" id="adminColor" value="#0d6efd" onchange="changeColorAdmin()">
    </div>
  </section>
</main>

<script>
const menuBtn = document.getElementById('menuBtn');
const sidebar = document.getElementById('sidebar');
const main = document.getElementById('main');

menuBtn.onclick = () => {
  sidebar.classList.toggle('show');
  main.classList.toggle('shift');
};

function showSection(sec){
  document.querySelectorAll('section').forEach(s => s.classList.add('hidden'));
  document.getElementById(sec).classList.remove('hidden');
}

const yapilanIslem = document.getElementById('yapilanIslem');
const garanti = document.getElementById('garanti');

function checkGaranti(){
  const val = yapilanIslem.value;
  if(val === 'led' || val === 'panel'){
    garanti.value = '1 Yıl';
    garanti.readOnly = true;
  } else if(val === 'diger'){
    garanti.value = '';
    garanti.readOnly = false;
  } else {
    garanti.value = '';
    garanti.readOnly = true;
  }
}

function startCamera(){
  const preview = document.getElementById('camera-preview');
  if(navigator.mediaDevices && navigator.mediaDevices.getUserMedia){
    navigator.mediaDevices.getUserMedia({ video: { facingMode: "environment" }})
      .then(stream => {
        preview.innerHTML = '';
        const video = document.createElement('video');
        video.srcObject = stream;
        video.play();
        video.style.width = '100%';
        video.style.height = '100%';
        preview.appendChild(video);
      }).catch(err => {
        preview.innerHTML = 'Kamera açılamadı';
      });
  } else {
    preview.innerHTML = 'Kamera desteklenmiyor';
  }
}

function changeColor(){
  document.querySelector('header').style.backgroundColor = document.getElementById('colorPicker').value;
  document.querySelector('.menu').style.backgroundColor = document.getElementById('colorPicker').value;
}

function kaydet(){
  alert('Servis kaydı tamamlandı!');
}

function loginAdmin(){
  const pass = document.getElementById('adminPass').value;
  if(pass === '6161'){
    document.getElementById('adminContent').classList.remove('hidden');
  } else {
    alert('Şifre yanlış');
  }
}

function changeColorAdmin(){
  const val = document.getElementById('adminColor').value;
  document.querySelector('header').style.backgroundColor = val;
  document.querySelector('.menu').style.backgroundColor = val;
}
</script>

</body>
</html>
