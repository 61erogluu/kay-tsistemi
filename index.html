<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>EROÄLU | TV Servis YÃ¶netimi</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdn.jsdelivr.net/npm/jsbarcode@3.11.5/dist/JsBarcode.all.min.js"></script>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@100;400;700;900&display=swap" rel="stylesheet">
<style>
/* Temel stil ve renkler */
:root{--primary:#FF5733;--bg:#0A0A0A;--card:#1C1C1C;--text:#F0F0F0;--primary-dark:#CC472A;--muted:#888;--border:#333;--shadow:0 5px 20px rgba(0,0,0,0.8);--header-bg:var(--card);--sidebar-bg:var(--card);--font-body:'Poppins',sans-serif}
*{box-sizing:border-box}html,body{height:100%;margin:0;font-family:var(--font-body);color:var(--text);background:var(--bg);transition:background-color 0.3s}
#splash{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;background:var(--bg);z-index:9999;opacity:1;transition:opacity 0.5s ease-out 2.5s;}
.splash-title{font-weight:900;letter-spacing:12px;font-size:clamp(60px,14vw,120px);color:var(--primary);text-shadow:0 0 8px var(--primary);animation:textReveal 1s ease both;}
@keyframes textReveal{from{opacity:0;transform:translateY(20px);filter:blur(10px);}to{opacity:1;transform:translateY(0);filter:blur(0);}}
.header{height:60px;display:flex;align-items:center;gap:16px;padding:0 20px;background:var(--header-bg);color:var(--text);position:fixed;top:0;left:0;right:0;z-index:900;border-bottom:1px solid var(--border);box-shadow:var(--shadow)}
.header .brand{font-weight:900;font-size:1.6rem;color:var(--primary)}
.header .actions{margin-left:auto;display:flex;gap:10px;align-items:center}
.sidebar{width:240px;background:var(--sidebar-bg);height:calc(100vh - 60px);padding:15px 0;position:fixed;left:0;top:60px;border-right:1px solid var(--border);transition:transform .3s ease;z-index:800;box-shadow:2px 0 5px rgba(0,0,0,0.5)}
.sidebar.hidden{transform:translateX(-100%)}
.side-btn{display:flex;align-items:center;gap:15px;padding:15px 20px;border-radius:0;background:transparent;border:0;color:var(--text);cursor:pointer;width:100%;text-align:left;transition:background-color 0.2s,color 0.2s}
.side-btn:hover{background:#282828;color:var(--primary)}
.side-btn.active{background:var(--primary);color:var(--card);font-weight:700}
.side-btn.active:hover{background:var(--primary-dark)}
.main{margin-left:240px;padding:30px;flex:1;min-height:calc(100vh - 60px);transition:margin-left 0.3s;background:var(--bg)}
.card{background:var(--card);padding:25px;border-radius:2px;border:1px solid var(--border);box-shadow:var(--shadow);margin-bottom:25px}
.grid-3{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:20px}
.stat-card{padding:20px;border-radius:2px;background:var(--card);border-left:5px solid var(--primary);box-shadow:0 2px 5px rgba(0,0,0,0.3)}
.stat-title{font-size:0.9rem;color:var(--muted);margin-bottom:8px;text-transform:uppercase}
.stat-value{font-weight:900;font-size:2.5rem;color:var(--primary)}
.form-row{display:flex;gap:15px;margin-bottom:15px;align-items:center;flex-wrap:wrap}
.input,.select,.textarea{padding:12px 15px;border-radius:2px;border:1px solid var(--border);background:var(--bg);color:var(--text);font-size:1rem;transition:border-color 0.2s;width:100%}
.input:focus,.select:focus,.textarea:focus{border-color:var(--primary);outline:none}
.textarea{resize:vertical;min-height:80px}
.btn{padding:12px 20px;border-radius:2px;cursor:pointer;background:var(--primary);border:none;color:var(--card);font-weight:600;transition:background-color 0.2s}
.btn:hover{background:var(--primary-dark)}
.btn-secondary{background:var(--muted);color:var(--card)}
.btn-secondary:hover{background:#606060}
.label{width:150px;color:var(--muted);font-weight:600}
.hidden-panel{display:none}
.muted{color:var(--muted)}
.badge{display:inline-block;padding:4px 10px;border-radius:2px;font-size:0.8rem;font-weight:600}
.badge.active{background:#28a745;color:#fff}
.badge.passive{background:#dc3545;color:#fff}
.modal{position:fixed;inset:0;background:rgba(0,0,0,.8);backdrop-filter:blur(4px);display:flex;align-items:center;justify-content:center;z-index:1000;opacity:0;pointer-events:none;transition:opacity 0.3s}
.modal.visible{opacity:1;pointer-events:auto}
.modal-box{width:90%;max-width:400px;background:var(--card);padding:30px;border-radius:2px;border:1px solid var(--primary)}
@media(max-width:900px){.sidebar{width:100%;height:calc(100vh - 60px);top:60px}.main{margin-left:0;padding:15px}.hamburger{display:flex;align-items:center;justify-content:center;font-size:1.2rem;color:var(--primary)}.sidebar.hidden{transform:translateX(-100%)}}
</style>
</head>
<body>

<div id="splash"><div class="splash-title">EROÄLU</div></div>

<header class="header">
<button class="hamburger" id="hambBtn" aria-label="menÃ¼">â˜°</button>
<div class="brand">EROÄLU</div>
<div class="actions">
<button id="adminSettingsBtn" class="btn hidden" style="padding:8px 15px;font-size:0.9rem;">âš™ï¸ Admin AyarlarÄ±</button>
</div>
</header>

<nav id="sidebar" class="sidebar hidden">
<button class="side-btn active" data-panel="dashboard">ğŸ“Š Servis Ã–zeti</button>
<button class="side-btn" data-panel="records">ğŸ“‘ Servis KayÄ±tlarÄ±</button>
<button class="side-btn" data-panel="add">â• Yeni Servis GiriÅŸi</button>
<button class="side-btn" data-panel="settings">ğŸ› ï¸ Ayarlar</button>
</nav>

<main class="main">
<!-- Dashboard -->
<section id="dashboard" class="panel-content">
<div class="card">
<h2 style="color:var(--primary);border-bottom:1px solid var(--border);padding-bottom:10px;">ğŸ“Š Servis Ã–zeti</h2>
<div class="grid-3" style="margin-top:20px">
<div class="stat-card"><div class="stat-title">TOPLAM SERVÄ°S KAYDI</div><div class="stat-value" id="statRecords">0</div></div>
<div class="stat-card"><div class="stat-title">GARANTÄ°SÄ° SÃœREN Ä°ÅLEM</div><div class="stat-value" id="statActiveWarranty">0</div></div>
<div class="stat-card"><div class="stat-title">BU AY EKLENEN Ä°ÅLEM</div><div class="stat-value" id="statThisMonth">0</div></div>
</div>
<div class="card" style="margin-top:25px"><h3 style="margin-top:0;color:var(--primary)">HaftalÄ±k Ä°ÅŸlem GrafiÄŸi</h3>
<canvas id="visitorsChart" height="100"></canvas></div>
</div>
</section>

<!-- Records -->
<section id="records" class="panel-content hidden-panel">
<div class="card">
<h2 style="color:var(--primary);border-bottom:1px solid var(--border);padding-bottom:10px;">ğŸ“‘ Servis KayÄ±tlarÄ± Listesi</h2>
<div style="overflow-x:auto;margin-top:20px">
<table class="table" id="recordsTable">
<thead>
<tr><th>TV Kod/Seri</th><th>Model</th><th>Ä°ÅŸlem</th><th>KayÄ±t Tarihi</th><th>Garanti BitiÅŸ</th><th>Ä°ÅŸlem</th></tr>
</thead>
<tbody></tbody>
</table>
</div>
</div>
</section>

<!-- Add Record -->
<section id="add" class="panel-content hidden-panel">
<div class="card">
<h2 style="color:var(--primary);border-bottom:1px solid var(--border);padding-bottom:10px;">â• Yeni Servis GiriÅŸi</h2>
<div style="margin-top:20px;">
<div class="form-row"><label class="label">TV Kod/Seri No:</label><input id="inpCode" class="input" placeholder="MÃ¼ÅŸteri Kodu veya TV Seri No" type="text" style="flex:1"/></div>
<div class="form-row"><label class="label">TV Modeli:</label><input id="inpModel" class="input" placeholder="Ã–rn: Samsung QLED 55" type="text" style="flex:1"/></div>
<div class="form-row"><label class="label">YapÄ±lan Ä°ÅŸlem:</label>
<select id="inpProcess" class="select" style="flex:1">
<option value="Led DeÄŸiÅŸim">Led DeÄŸiÅŸim</option>
<option value="Panel DeÄŸiÅŸim">Panel DeÄŸiÅŸim</option>
<option value="Kamera Okuma">Kamera/Barkod Okuma</option>
<option value="DiÄŸer">DiÄŸer</option>
</select>
</div>
<h3 style="color:var(--muted);margin-top:30px;border-bottom:1px solid var(--border);padding-bottom:5px;">Ek Detaylar & Garanti</h3>
<div class="form-row"><label class="label">Ä°ÅŸlem DetaylarÄ± (El ile):</label><textarea id="inpNotes" class="textarea" placeholder="Ekstra Notlar" style="flex:1"></textarea></div>
<div class="form-row"><label class="label">Garanti BitiÅŸ Tarihi:</label><input id="inpWarrantyDate" class="input" type="date" style="flex:1"/></div>
<p class="muted" style="font-size:0.9rem;margin-top:-10px;">*(Manuel tarih girilmezse, otomatik 1 yÄ±l garanti eklenir.)</p>
<div style="display:flex;gap:10px;margin-top:20px"><button class="btn" id="addRecordBtn" style="flex:1">KaydÄ± Sisteme Ekle</button><button class="btn btn-secondary" id="clearBtn" style="flex:1">Formu Temizle</button></div>
</div>
</div>
</section>

</main>

<script>
// LocalStorage ve Admin AyarlarÄ±
const LOCAL_STORAGE_KEY_RECORDS = 'eroglu_records_v4';
const LOCAL_STORAGE_KEY_ADMIN = 'eroglu_admin_code_v4';
let records = JSON.parse(localStorage.getItem(LOCAL_STORAGE_KEY_RECORDS)||'[]');
let ADMIN_CODE = localStorage.getItem(LOCAL_STORAGE_KEY_ADMIN)||'6161';
let isAdminLoggedIn=false;

// Tarih format
function formatDate(dateString){if(!dateString)return'N/A';try{return new Date(dateString).toLocaleDateString('tr-TR',{year:'numeric',month:'short',day:'numeric'});}catch{return dateString;}}

// Records render
function renderRecords(){const tbody=document.querySelector('#recordsTable tbody');tbody.innerHTML='';const today=new Date();records.forEach((r,i)=>{const warrantyEnd=new Date(r.warrantyDate);const isWarrantyActive=warrantyEnd>today;const badgeClass=isWarrantyActive?'active':'passive';const badgeText=isWarrantyActive?'SÃœRÃœYOR':'BÄ°TTÄ°';const tr=document.createElement('tr');tr.innerHTML=`<td>${r.code}</td><td>${r.model}</td><td>${r.process}</td><td>${formatDate(r.created)}</td><td><span class="badge ${badgeClass}">${formatDate(r.warrantyDate)} - ${badgeText}</span></td><td><button class="btn" style="padding:6px 10px;font-size:0.8rem;" onclick="viewNotes(${i})">Detay</button><button class="btn btn-secondary" style="padding:6px 10px;font-size:0.8rem;" onclick="delRecord(${i})">Sil</button></td>`;tbody.appendChild(tr);});}

// Add record
document.getElementById('addRecordBtn').addEventListener('click',()=>{const code=document.getElementById('inpCode').value.trim();const model=document.getElementById('inpModel').value.trim();const process=document.getElementById('inpProcess').value;const notes=document.getElementById('inpNotes').value.trim();const manualWarrantyDate=document.getElementById('inpWarrantyDate').value;if(!code||!model||!process){alert('Hata: Kod, Model ve Ä°ÅŸlem alanlarÄ± zorunludur!');return;}let warrantyDate;if(manualWarrantyDate){const manualDate=new Date(manualWarrantyDate);manualDate.setMinutes(manualDate.getMinutes()+manualDate.getTimezoneOffset());warrantyDate=manualDate.toISOString();}else{const oneYearLater=new Date();oneYearLater.setFullYear(oneYearLater.getFullYear()+1);warrantyDate=oneYearLater.toISOString();}records.push({code,model,process,notes,created:new Date().toISOString(),warrantyDate});localStorage.setItem(LOCAL_STORAGE_KEY_RECORDS,JSON.stringify(records));document.getElementById('inpCode').value='';document.getElementById('inpModel').value='';document.getElementById('inpProcess').value='Led DeÄŸiÅŸim';document.getElementById('inpNotes').value='';document.getElementById('inpWarrantyDate').value='';renderRecords();alert('Yeni servis kaydÄ± baÅŸarÄ±yla eklendi!');});
document.getElementById('clearBtn').addEventListener('click',()=>{document.getElementById('inpCode').value='';document.getElementById('inpModel').value='';document.getElementById('inpProcess').value='Led DeÄŸiÅŸim';document.getElementById('inpNotes').value='';document.getElementById('inpWarrantyDate').value='';});
function delRecord(i){if(!confirm('Bu servis kaydÄ±nÄ± silmek istediÄŸinizden emin misiniz?'))return;records.splice(i,1);localStorage.setItem(LOCAL_STORAGE_KEY_RECORDS,JSON.stringify(records));renderRecords();}
function viewNotes(i){const record=records[i];alert(`--- Ä°ÅŸlem DetaylarÄ± ---\n\nKod/Seri: ${record.code}\nModel: ${record.model}\nÄ°ÅŸlem: ${record.process}\nKayÄ±t Tarihi: ${formatDate(record.created)}\nGaranti BitiÅŸi: ${formatDate(record.warrantyDate)}\n\n--- El ile Notlar ---\n\n${record.notes||'Not bulunmamaktadÄ±r.'}`);}

// Splash ekran
window.addEventListener('load',()=>{setTimeout(()=>{document.getElementById('splash').style.opacity='0';setTimeout(()=>document.getElementById('splash').style.display='none',500);},3000);renderRecords();});

</script>
</body>
</html>
