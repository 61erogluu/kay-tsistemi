<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <title>XCOOL | FOLDER SYSTEM</title>
    <style>
        :root { --accent: #00ffcc; --bg: #0a0a0a; --card: #151515; }
        * { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Segoe UI', sans-serif; }
        body { background: var(--bg); color: #fff; display: flex; height: 100vh; }

        /* Sidebar */
        .sidebar { width: 240px; background: #000; border-right: 1px solid #222; padding: 20px; }
        .logo { font-size: 22px; font-weight: 900; color: var(--accent); margin-bottom: 30px; border-bottom: 2px solid var(--accent); padding-bottom: 10px; }
        .nav-btn { width: 100%; padding: 12px; background: none; border: none; color: #888; text-align: left; cursor: pointer; border-radius: 5px; margin-bottom: 5px; }
        .nav-btn.active { background: var(--accent); color: #000; font-weight: bold; }

        /* Ana Alan */
        .container { flex: 1; display: flex; flex-direction: column; padding: 30px; }
        
        /* Drop Alanƒ± */
        #drop-zone { 
            border: 2px dashed #333; border-radius: 15px; padding: 40px; 
            text-align: center; cursor: pointer; transition: 0.3s; 
            background: rgba(255,255,255,0.02); margin-bottom: 20px;
        }
        #drop-zone:hover { border-color: var(--accent); background: rgba(0, 255, 204, 0.05); }

        /* Dosya Listesi */
        .file-list { display: grid; grid-template-columns: repeat(auto-fill, minmax(180px, 1fr)); gap: 15px; overflow-y: auto; }
        .file-item { 
            background: var(--card); border: 1px solid #222; padding: 15px; 
            border-radius: 10px; text-align: center; transition: 0.2s; position: relative;
        }
        .file-item:hover { border-color: var(--accent); transform: translateY(-3px); }
        .file-item b { display: block; font-size: 12px; margin: 10px 0; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
        
        .actions { display: flex; gap: 5px; }
        .btn { flex: 1; padding: 8px; border: none; border-radius: 4px; cursor: pointer; font-size: 11px; font-weight: bold; text-decoration: none; text-align: center; }
        .btn-open { background: #333; color: #fff; }
        .btn-dl { background: var(--accent); color: #000; }

        /* √ñnizleme Modal */
        #preview { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.9); z-index: 100; flex-direction: column; padding: 20px; }
        #preview-content { flex: 1; background: #fff; border-radius: 10px; overflow: auto; display: flex; justify-content: center; align-items: center; }
    </style>
</head>
<body>

<div class="sidebar">
    <div class="logo">XCOOL PRO</div>
    <button class="nav-btn active" onclick="setTab('T√ºm√º')">üìÇ T√ºm√º</button>
    <button class="nav-btn" onclick="setTab('Klas√∂rler')">üìÅ Klas√∂r ƒ∞√ßeriƒüi</button>
    <div style="margin-top: 20px; font-size: 10px; color: #444;">KLAS√ñR√ú S√úR√úKLE BIRAK</div>
</div>

<div class="container">
    <div id="drop-zone" onclick="document.getElementById('manual-inp').click()">
        <h2 style="color: var(--accent);">DOSYA VEYA KLAS√ñR AT</h2>
        <p style="color: #666; font-size: 14px;">Klas√∂r√º buraya bƒ±rakƒ±rsan i√ßindeki t√ºm dosyalarƒ± tek tek a√ßarƒ±m.</p>
        <input type="file" id="manual-inp" hidden multiple webkitdirectory directory onchange="handleFiles(this.files)">
    </div>

    <div class="file-list" id="list"></div>
</div>

<div id="preview">
    <div style="display:flex; justify-content:space-between; margin-bottom:10px;">
        <h3 id="p-title">√ñnizleme</h3>
        <button onclick="closePreview()" style="background:red; color:white; border:none; padding:5px 15px; cursor:pointer;">KAPAT</button>
    </div>
    <div id="preview-content"></div>
</div>

<script>
    let filesData = [];
    
    // S√ºr√ºkle Bƒ±rak Ayarlarƒ±
    const zone = document.getElementById('drop-zone');
    ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(e => {
        zone.addEventListener(e, (evt) => {
            evt.preventDefault();
            if(e === 'drop') {
                // Klas√∂r i√ßindeki dosyalarƒ± derinlemesine okuma
                const items = evt.dataTransfer.items;
                if (items) {
                    for (let i = 0; i < items.length; i++) {
                        const item = items[i].webkitGetAsEntry();
                        if (item) traverseFileTree(item);
                    }
                }
            }
        });
    });

    // Klas√∂r yapƒ±sƒ±nƒ± tarayan fonksiyon
    function traverseFileTree(item, path = "") {
        if (item.isFile) {
            item.file((file) => {
                addFile(file);
            });
        } else if (item.isDirectory) {
            let dirReader = item.createReader();
            dirReader.readEntries((entries) => {
                for (let i = 0; i < entries.length; i++) {
                    traverseFileTree(entries[i], path + item.name + "/");
                }
            });
        }
    }

    function handleFiles(files) {
        for(let f of files) addFile(f);
    }

    function addFile(file) {
        const fileObj = {
            name: file.name,
            url: URL.createObjectURL(file),
            type: file.type,
            raw: file
        };
        filesData.push(fileObj);
        render();
    }

    function render() {
        const list = document.getElementById('list');
        list.innerHTML = '';
        filesData.forEach((f, i) => {
            const card = document.createElement('div');
            card.className = 'file-item';
            card.innerHTML = `
                <div style="font-size:30px">${f.type.includes('image') ? 'üñºÔ∏è' : 'üìÑ'}</div>
                <b>${f.name}</b>
                <div class="actions">
                    <button class="btn btn-open" onclick="openFile(${i})">A√á</button>
                    <a href="${f.url}" download="${f.name}" class="btn btn-dl">ƒ∞NDƒ∞R</a>
                </div>
            `;
            list.appendChild(card);
        });
    }

    function openFile(i) {
        const f = filesData[i];
        const p = document.getElementById('preview');
        const c = document.getElementById('preview-content');
        document.getElementById('p-title').innerText = f.name;
        c.innerHTML = '';
        p.style.display = 'flex';

        if(f.type.includes('image')) {
            c.innerHTML = `<img src="${f.url}" style="max-width:100%; max-height:100%">`;
        } else if(f.type.includes('video')) {
            c.innerHTML = `<video src="${f.url}" controls style="max-width:100%"></video>`;
        } else {
            c.innerHTML = `<div style="padding:20px">√ñnizleme desteklenmiyor. ƒ∞ndirip a√ßabilirsiniz.</div>`;
        }
    }

    function closePreview() { document.getElementById('preview').style.display = 'none'; }
    function setTab(t) { console.log(t + " se√ßildi"); }
</script>

</body>
</html>
