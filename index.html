<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Eroƒülu | Servis Y√∂netimi</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@100;400;700;900&display=swap" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdn.jsdelivr.net/npm/quagga@0.12.1/dist/quagga.min.js"></script>
<style>
:root{
    --primary:#FF5733;
    --bg:#0A0A0A;
    --card:#1C1C1C;
    --text:#F0F0F0;
    --border:#333;
}
body,html{margin:0;padding:0;font-family:'Poppins',sans-serif;background:var(--bg);color:var(--text);}
#splash{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;background:var(--bg);z-index:9999;transition:opacity 0.5s;}
.splash-title{font-weight:900;font-size:clamp(60px,14vw,120px);color:var(--primary);text-shadow:0 0 8px var(--primary);}
.header{height:60px;display:flex;align-items:center;padding:0 20px;background:var(--card);position:fixed;top:0;left:0;right:0;z-index:900;box-shadow:0 5px 20px rgba(0,0,0,0.8);}
.brand{font-weight:900;font-size:1.6rem;color:var(--primary);margin-left:10px;}
.hamburger{font-size:1.5rem;color:var(--primary);cursor:pointer;}
.sidebar{width:240px;background:var(--card);height:100vh;padding-top:60px;position:fixed;left:0;top:0;transform:translateX(-100%);transition:transform .3s;z-index:800;overflow-y:auto;}
.sidebar.show{transform:translateX(0);}
.side-btn{display:flex;align-items:center;gap:15px;padding:15px 20px;border:none;background:none;color:var(--text);width:100%;text-align:left;cursor:pointer;}
.side-btn:hover{background:#282828;color:var(--primary);}
.side-btn.active{background:var(--primary);color:var(--card);}
.main{margin-left:0;padding:80px 20px;transition:margin-left 0.3s;}
.card{background:var(--card);padding:20px;margin-bottom:20px;border-radius:5px;box-shadow:0 5px 20px rgba(0,0,0,0.5);}
.grid-3{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:20px;}
.input,.select,.textarea{width:100%;padding:10px;margin-top:5px;border-radius:4px;border:1px solid var(--border);background:var(--bg);color:var(--text);}
.btn{padding:10px 15px;background:var(--primary);border:none;color:var(--card);cursor:pointer;margin-top:10px;}
.btn:hover{background:#cc472a;}
.table{width:100%;border-collapse:collapse;}
.table th,.table td{padding:10px;border-bottom:1px solid var(--border);text-align:left;}
.table th{color:var(--primary);}
.modal{position:fixed;inset:0;background:rgba(0,0,0,0.8);display:flex;align-items:center;justify-content:center;opacity:0;pointer-events:none;transition:opacity 0.3s;}
.modal.show{opacity:1;pointer-events:auto;}
.modal-box{background:var(--card);padding:20px;border-radius:5px;width:90%;max-width:400px;}
#videoWrapper{width:100%;height:300px;background:#000;margin-bottom:10px;position:relative;}
@media(max-width:900px){.main{padding:80px 15px;}}
</style>
</head>
<body>
<div id="splash"><div class="splash-title">EROƒûLU</div></div>

<header class="header">
    <div class="hamburger" id="hambBtn">‚ò∞</div>
    <div class="brand">EROƒûLU</div>
</header>

<nav id="sidebar" class="sidebar">
    <button class="side-btn active" data-panel="dashboard">Servis √ñzeti</button>
    <button class="side-btn" data-panel="records">Servis Kayƒ±tlarƒ±</button>
    <button class="side-btn" data-panel="add">Yeni Servis Giri≈üi</button>
    <button class="side-btn" data-panel="admin">Admin Panel</button>
</nav>

<main class="main">
    <section id="dashboard" class="panel">
        <div class="card"><h2>üìä Servis √ñzeti</h2>
            <div class="grid-3">
                <div class="card">Toplam Kayƒ±t: <span id="statRecords">0</span></div>
                <div class="card">Garanti S√ºren: <span id="statActiveWarranty">0</span></div>
                <div class="card">Bu Ay Eklenen: <span id="statThisMonth">0</span></div>
            </div>
            <canvas id="chart" height="100"></canvas>
        </div>
    </section>

    <section id="records" class="panel" style="display:none;">
        <div class="card">
            <h2>üìë Servis Kayƒ±tlarƒ±</h2>
            <div id="videoWrapper"></div>
            <table class="table">
                <thead><tr><th>Kod</th><th>Model</th><th>ƒ∞≈ülem</th><th>Kayƒ±t</th><th>Garanti</th></tr></thead>
                <tbody id="recordsTable"></tbody>
            </table>
        </div>
    </section>

    <section id="add" class="panel" style="display:none;">
        <div class="card">
            <h2>‚ûï Yeni Servis Giri≈üi</h2>
            <input id="inpCode" class="input" placeholder="TV Kod/Seri">
            <input id="inpModel" class="input" placeholder="Model">
            <input id="inpProcess" class="input" placeholder="Yapƒ±lan ƒ∞≈ülem">
            <textarea id="inpNotes" class="textarea" placeholder="Ekstra Notlar"></textarea>
            <input id="inpWarrantyDate" type="number" class="input" placeholder="Garanti Yƒ±lƒ± (√∂rn: 1)">
            <button id="addRecordBtn" class="btn">Kaydƒ± Ekle</button>
        </div>
    </section>

    <section id="admin" class="panel" style="display:none;">
        <div class="card">
            <h2>‚öôÔ∏è Admin Panel</h2>
            <input id="adminCodeInput" class="input" type="password" placeholder="Admin ≈ûifre: 6161">
            <button id="loginAdminBtn" class="btn">Giri≈ü</button>
            <div id="adminSettings" style="display:none;margin-top:10px;">
                <label>Vurgu Rengi:</label><input type="color" id="colorPrimary"><br>
                <label>Arka Plan:</label><input type="color" id="colorBG">
            </div>
        </div>
    </section>
</main>

<script>
// Splash
window.addEventListener('load',()=>{
    setTimeout(()=>{document.getElementById('splash').style.display='none'},2000);
});

// Sidebar
const hamb=document.getElementById('hambBtn'),sidebar=document.getElementById('sidebar');
hamb.addEventListener('click',()=>{sidebar.classList.toggle('show');});
document.querySelectorAll('.side-btn').forEach(b=>{
    b.addEventListener('click',()=>{
        document.querySelectorAll('.panel').forEach(p=>p.style.display='none');
        document.getElementById(b.dataset.panel).style.display='block';
        document.querySelectorAll('.side-btn').forEach(btn=>btn.classList.remove('active'));
        b.classList.add('active');
    });
});

// LocalStorage Records
let records=JSON.parse(localStorage.getItem('records')||'[]');
function renderRecords(){
    const tbody=document.getElementById('recordsTable');
    tbody.innerHTML='';
    records.forEach(r=>{
        const tr=document.createElement('tr');
        tr.innerHTML=`<td>${r.code}</td><td>${r.model}</td><td>${r.process}</td><td>${r.created}</td><td>${r.warranty} yƒ±l</td>`;
        tbody.appendChild(tr);
    });
    document.getElementById('statRecords').innerText=records.length;
}
renderRecords();

// Add Record
document.getElementById('addRecordBtn').addEventListener('click',()=>{
    const code=document.getElementById('inpCode').value;
    const model=document.getElementById('inpModel').value;
    const process=document.getElementById('inpProcess').value;
    const notes=document.getElementById('inpNotes').value;
    const warranty=document.getElementById('inpWarrantyDate').value||1;
    if(!code||!model||!process){alert('T√ºm alanlarƒ± doldur!'); return;}
    const obj={code,model,process,notes,created:new Date().toLocaleDateString(),warranty};
    records.push(obj);
    localStorage.setItem('records',JSON.stringify(records));
    renderRecords();
    alert('Kayƒ±t eklendi!');
});

// Admin Login
document.getElementById('loginAdminBtn').addEventListener('click',()=>{
    const val=document.getElementById('adminCodeInput').value;
    if(val==='6161'){
        document.getElementById('adminSettings').style.display='block';
        alert('Admin giri≈üi ba≈üarƒ±lƒ±!');
    } else alert('Hatalƒ± ≈üifre!');
});

// Admin Renk Deƒüi≈üimi
document.getElementById('colorPrimary').addEventListener('input',(e)=>{document.documentElement.style.setProperty('--primary',e.target.value);});
document.getElementById('colorBG').addEventListener('input',(e)=>{document.documentElement.style.setProperty('--bg',e.target.value);});

// Chart.js
const ctx=document.getElementById('chart').getContext('2d');
new Chart(ctx,{type:'line',data:{labels:['Pzt','Sal','√áar','Per','Cum','Cmt','Paz'],datasets:[{label:'Haftalƒ±k Kayƒ±t',data:[45,60,50,75,65,90,80],fill:true,backgroundColor:'rgba(255,87,51,0.3)',borderColor:'#FF5733',tension:0.4}]}});
// Quagga Barcode
function startScanner(){
    Quagga.init({
        inputStream:{type:"LiveStream",target:document.querySelector('#videoWrapper'),constraints:{facingMode:"environment"}},
        decoder:{readers:["code_128_reader","ean_reader","ean_8_reader","code_39_reader","upc_reader","upc_e_reader"]}
    },err=>{
        if(err){console.error(err);return;}
        Quagga.start();
    });
    Quagga.onDetected(data=>{
        const code=data.codeResult.code;
        document.getElementById('inpCode').value=code;
    });
}
startScanner();
</script>
</body>
</html>
